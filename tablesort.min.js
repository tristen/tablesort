/*!
 * tablesort v4.1.1 (2016-09-12)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2016 ; Licensed MIT
*/!function(){function a(b,c){if(!(this instanceof a))return new a(b,c);if(!b||"TABLE"!==b.tagName)throw new Error("Element must be a table");this.init(b,c||{})}var b=[],c=function(a){var b;return window.CustomEvent&&"function"==typeof window.CustomEvent?b=new CustomEvent(a):(b=document.createEvent("CustomEvent"),b.initCustomEvent(a,!1,!1,void 0)),b},d=function(a){return a.getAttribute("data-sort")||a.textContent||a.innerText||""},e=function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a===b?0:a<b?1:-1},f=function(a,b){return function(c,d){var e=a(c.td,d.td);return 0===e?b?d.index-c.index:c.index-d.index:e}};a.extend=function(a,c,d){if("function"!=typeof c||"function"!=typeof d)throw new Error("Pattern and sort must be a function");b.push({name:a,pattern:c,sort:d})},a.prototype={init:function(a,b){var c,d,e,f,g,h=this;e={sortedClass:"sorted",ascendingClass:"sort-down",descendingClass:"sort-up",descending:!1};for(key in e)void 0===b[key]&&(b[key]=e[key]);if(h.table=a,h.thead=!1,h.options=b,h.sortedClass=h.options.sortedClass,h.ascendingClass=h.options.ascendingClass,h.descendingClass=h.options.descendingClass,a.rows&&a.rows.length>0)if(a.tHead&&a.tHead.rows.length>0){for(f=0;f<a.tHead.rows.length;f++)if(a.tHead.rows[f].classList.contains("sort-row")){c=a.tHead.rows[f];break}c||(c=a.tHead.rows[a.tHead.rows.length-1]),h.thead=!0}else c=a.rows[0];if(c){var i=function(){h.current&&h.current!==this&&(h.current.classList.remove(h.sortedClass),h.current.classList.remove(h.ascendingClass),h.current.classList.remove(h.descendingClass)),h.current=this,h.sortTable(this)};for(f=0;f<c.cells.length;f++)g=c.cells[f],g.classList.contains("no-sort")||(g.classList.add("sort-header"),g.tabindex=0,g.addEventListener("click",i,!1),g.classList.contains("sort-default")&&(d=g));d&&(h.current=d,h.sortTable(d))}},sortTable:function(a,g){var h,i=this,j=a.cellIndex,k=e,l="",m=[],n=i.thead?0:1,o=a.getAttribute("data-sort-method"),p=a.getAttribute("data-sort-order");if(i.table.dispatchEvent(c("beforeSort")),g?h=a.classList.contains(i.ascendingClass)?i.ascendingClass:i.descendingClass:(h=a.classList.contains(i.ascendingClass)?i.descendingClass:a.classList.contains(i.descendingClass)?i.ascendingClass:"asc"===p?i.ascendingClass:"desc"===p?i.descendingClass:i.options.descending?i.descendingClass:i.ascendingClass,a.classList.remove(h===i.descendingClass?i.ascendingClass:i.descendingClass),a.classList.add(i.sortedClass),a.classList.add(h)),!(i.table.rows.length<2)){if(!o){for(;m.length<3&&n<i.table.tBodies[0].rows.length;)l=d(i.table.tBodies[0].rows[n].cells[j]),l=l.trim(),l.length>0&&m.push(l),n++;if(!m)return}for(n=0;n<b.length;n++)if(l=b[n],o){if(l.name===o){k=l.sort;break}}else if(m.every(l.pattern)){k=l.sort;break}for(i.col=j,n=0;n<i.table.tBodies.length;n++){var q,r=[],s={},t=0,u=0;if(!(i.table.tBodies[n].rows.length<2)){for(q=0;q<i.table.tBodies[n].rows.length;q++)l=i.table.tBodies[n].rows[q],l.classList.contains("no-sort")?s[t]=l:r.push({tr:l,td:d(l.cells[i.col]),index:t}),t++;for(h===i.ascendingClass?(r.sort(f(k,!0)),r.reverse()):r.sort(f(k,!1)),q=0;q<t;q++)s[q]?(l=s[q],u++):l=r[q-u].tr,i.table.tBodies[n].appendChild(l)}}i.table.dispatchEvent(c("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=a:window.Tablesort=a}();